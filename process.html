<html>
  <head>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel='stylesheet' type='text/css' media='screen' href='style.css'>
  </head>


  <body>
    <h2>
        <a href="index.html">Home</a>
        &nbsp
        <a href="about.html">About</a>
        &nbsp
        <a href="process.html">Process</a>
        &nbsp
        <a href="data.html">Data</a>
        &nbsp
      </h2>

    <p id="text1"></p>

    <py-config>
        packages = ["numpy", "pandas", "matplotlib", "scikit-learn"]
    </py-config>

    <py-script>
        import pandas as pd
        import numpy as np
        import matplotlib.pyplot as plt

        from sklearn.linear_model import LinearRegression
        from sklearn.model_selection import train_test_split
        from pyodide.http import open_url
        from pyodide.ffi import create_proxy

        url = ("https://raw.githubusercontent.com/lextago/apes_proj/main/2022-cook-county.csv")

        data = pd.read_csv(open_url(url))
        x = data[["CO", "Ozone", "PM10", "PM25", "NO2"]].values
        y = data["Overall AQI Value"].values

        xtrain, xtest, ytrain, ytest = train_test_split(x, y)

        model = LinearRegression().fit(xtrain, ytrain)
        print("Model Information:")
        print("CO coefficient: ", round(model.coef_[0], 3))
        print("Ozone coefficient: ", round(model.coef_[1], 3))
        print("PM10 coefficient: ", round(model.coef_[2], 3))
        print("PM25 coefficient: ", round(model.coef_[3], 3))
        print("NO2 coefficient: ", round(model.coef_[4], 3))
        print("Accuracy: ", model.score(xtrain, ytrain))

        print("***************")
        print("Testing Results")
        for index in range(len(xtest)):
            x = xtest[index]
            x = x.reshape(-1, 5)
            y_pred = round(float(model.predict(x)), 4)
            actual = round(ytest[index], 4)
            print("Predicted AQI: ", y_pred, "Actual AQI: ", actual)
            print("")


    </py-script>
  </body>


</html>